# Процедуры и функции общего назначения БСП и типовых конфигураций

## 1. БСП

### 1.1. Версия БСП

	СтандартныеПодсистемыСервер.СтандартныеПодсистемыСервер(); ->
		СтандартныеПодсистемыПовтИсп.ОписанияПодсистем(); ->
			ОбновлениеИнформационнойБазыБСП.ПриДобавленииПодсистемы(Описание);

### 1.2. Заполнение общих параметров

	ИнтеграцияПодсистемБСП.ПриДобавленииПараметровРаботыКлиента();

### 1.3. Модуль **ОбщегоНазначенияПереопределяемый**

Минимальная версия платформы

	Процедура ПриОпределенииОбщихПараметровБазовойФункциональности(ОбщиеПараметры) Экспорт
		ОбщиеПараметры.Вставить("МинимальноНеобходимаяВерсияПлатформы", "8.3.6.2076");
		ОбщиеПараметры.Вставить("РаботаВПрограммеЗапрещена", Истина);
		ОбщиеПараметры.Вставить("РекомендуемыйОбъемОперативнойПамяти", 3);
	КонецПроцедуры

### 1.4. Модуль **ОбщегоНазначения**

	ОбщегоНазначения.ЗначениеРеквизитаОбъекта(Ссылка, ИмяРеквизита, ВыбратьРазрешенные = Ложь);
	
	ОбщегоНазначения.КоллекцииИдентичны(КоллекцияСтрок1, КоллекцияСтрок2, Знач ИменаКолонок = "",
		Знач ИсключаяКолонки = "", УчитыватьПоследовательностьСтрок = Ложь);

	ОбщегоНазначения.ПроверитьВыводТабличногоДокумента(ТабличныйДокумент, ВыводимыеОбласти);
	ОбщегоНазначения.МенеджерОбъектаПоСсылке(ВерсияСоглашенияСсылка);

### 1.5. Модуль **ОбщегоНазначенияКлиентСервер**

	ОбщегоНазначенияКлиентСервер.СкопироватьСтруктуру(СтруктураИсточник);
	ОбщегоНазначенияКлиентСервер.КлючиСтруктурыВСтроку(КлючиСтруктурыВСтроку(Структура, Разделитель = ","));
	ОбщегоНазначенияКлиентСервер.СвойствоСтруктуры(Структура, Ключ, ЗначениеПоУмолчанию = Неопределено);
	ОбщегоНазначенияКлиентСервер.ДополнитьМассив(МассивПриемник, МассивИсточник, ТолькоУникальныеЗначения = Ложь);
	ОбщегоНазначенияКлиентСервер.ДополнитьСтруктуру(Приемник, Источник, Заменять = Неопределено);
	
	ОбщегоНазначенияКлиентСервер.СообщитьПользователю(ТекстОшибки,,Поле);
	ОбщегоНазначенияКлиентСервер.СообщитьОшибкиПользователю(СписокОшибок);

	ОбщегоНазначенияКлиентСервер.ИзменитьЭлементыОтбора(ПлатежныеДокументы.КомпоновщикНастроек.Настройки.Отбор,,
		"Тип списания", ЗначенияОтборов.ТипСписания, ВидСравненияКомпоновкиДанных.Равно);
	
	ОбщегоНазначенияКлиентСервер.УстановитьСвойствоЭлементаФормы(Элементы, "Организация", "ТолькоПросмотр", Истина);
	ОбщегоНазначенияКлиентСервер.ЕстьРеквизитИлиСвойствоОбъекта(Форма, "Объект");

### 1.6. Модуль **СтроковыеФункцииКлиентСервер**

	СтроковыеФункцииКлиентСервер.ПодставитьПараметрыВСтроку(
		НСтр("ru = 'Неизвестный тип подключения: %1.'"), ПараметрыАдминистрирования.ТипПодключения);

### 1.7. Модуль **ПрефиксацияОбъектовКлиентСервер**

	ПрефиксацияОбъектовКлиентСервер.НомерНаПечать(
		Знач НомерОбъекта, УдалитьПрефиксИнформационнойБазы = Ложь, УдалитьПользовательскийПрефикс = Ложь);

### 1.8. Модуль **ПользователиПереопределяемый**

Позволяет указать роли, назначение которых будет контролироваться особым образом.

	ПользователиПереопределяемый.ПриОпределенииНазначенияРолей(НазначениеРолей);

## 2. Команды запуска

	/c ЗапуститьОбновлениеИнформационнойБазы
	/ClearCache

## 3. УХ

### 3.1. Работа с договорами

	РегистрыСведений.СвязанныеДоговоры.ПолучитьВстречныйДоговор(ДанныеЗаполнения.ДоговорКонтрагента);
	ДоговорыКонтрагентовФормыУХКлиентСервер.УправлениеФормойВерсияСоглашения(ЭтотОбъект);

### 3.2. Отражение факта

	ДвиженияБюджетированиеУХ.ОтразитьФактическоеДвижениеПоБюджетамПоПредопределенномуПравилу(Источник,Отказ);
	ФинансовыеИнструменты.ЗагрузитьФактическиеДанные(Объект);

### 3.3. Процессы

	ОбщийМодуль.МодульУправленияПроцессамиУХ.Модуль.ОпределитьСостояние()

### 3.4. Общего назначения

	ОбщегоНазначенияУХ.СообщитьОбОшибке("Не удалось создать или обновить связанный документ Подтверждение о согласовании условий займа:
	|"+ПодробноеПредставлениеОшибки(ИнформацияОбОшибке()),,,СтатусСообщения.Внимание);

	Элементы = Новый Массив;
	Элементы.Добавить(Элементы.ГрафикПроцентыУплаченоКорректировка);
	ФинансовыеИнструментыФормыКлиентСервер.УстановитьВидимостьЭлементов(Элементы, Истина);

### 3.5. Модуль **ИнтеграцияС1СДокументооборот**

	ИнтеграцияС1СДокументооборот.СсылкаИзUUID(Тип, UUID)

## 4. Бухгалтерия предприятия

### 4.1. Модуль **СписаниеСРасчетногоСчетаФормыКлиентСервер**

	СписаниеСРасчетногоСчетаФормыКлиентСервер.УправлениеФормой(Форма)

### 4.2. Реквизиты организаций, контрагентов

	СведенияОбОрганизации   = БухгалтерскийУчетПереопределяемый.СведенияОЮрФизЛице(
		Шапка.Организация, Шапка.Дата);
	ПредставлениеПоставщика = ОбщегоНазначенияБПВызовСервера.ОписаниеОрганизации(
		СведенияОбОрганизации, "НаименованиеДляПечатныхФорм,");
	БухгалтерскийУчетПереопределяемый.ПолучитьБанковскийСчетПоУмолчанию(
		ЮрФизЛицо, Валюта = Неопределено);

### 4.3. Реквизиты физлиц

	ОбщегоНазначенияБПВызовСервера.ДанныеФизЛица(Организация, ФизЛицо, ДатаСреза, ФИОКратко = Истина);
	УчетЗарплаты.ДанныеФизическихЛиц(Организация = Неопределено, ФизическиеЛица, ДатаСреза, ФИОКратко = Истина, РезультатТаблично = Ложь);

	УчетЗарплаты.ПредставлениеФизическогоЛица(ФизическоеЛицо, ДатаСреза);

### 4.4. Номенклатура

	БухгалтерскийУчетПереопределяемый.ПолучитьСведенияОСпискеНоменклатуры(МассивНоменклатуры, ДанныеОбъекта, Истина, Истина);

### 4.5. Модуль **ОбщегоНазначенияБЗК**

	ОбщегоНазначенияБЗК.МенеджерОбъектаПоТипу();

### 4.6. Отключить напоминание об обновлении конфигурации
Добавить __Возврат Ложь;__ в первой строке функции.

	ОбщегоНазначенияБП.ПредлагатьОбновитьВерсиюПрограммы(Параметры);

### 4.7. Отборы в списках

	ОтборыСписковКлиентСервер.УстановитьЭлементОтбораСписка();

## 5. ЗУП

### 5.1. Загрузка правил обмена и правил регистрации

	ОбменДаннымиСервер.ПолучитьПравилаВыборочнойРегистрацииОбъектов();

### 5.2. Проверка версии платформы

	КонфигурацииЗарплатаКадры.ПриОпределенииОбщихПараметровБазовойФункциональности();
